<?xml version="1.0" encoding="UTF-8"?>
<!-- DTD지정  -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.bestpricemarket.mappers.goodsMapper">
  
  
  

  	  	
  	<!-- 상품목록 -->
  	<select id="listGoods" resultType="com.bestpricemarket.domain.GoodsVO">
  		select * from goods order by gno desc
  	</select> 
  	<!-- 상품목록 -->
  	
  	
  	<!-- 상품조회 -->
  	<select id="detailGoods" resultType="com.bestpricemarket.domain.GoodsVO">
  		select * from goods where gno = #{gno} 
  	</select>  
  	<!-- 상품조회 -->
  	
  	
  	  <!-- 상품등록 -->
	<insert id="register" useGeneratedKeys="true" keyProperty="gno" parameterType="com.bestpricemarket.domain.GoodsVO">
 		insert into goods (category, g_m_id, gname, lowestprice, content, regDate, endDate) 
 		values (#{category},#{g_m_id},#{gname},#{lowestprice},#{content},now(),#{endDate});
	</insert>  
  	<!-- 상품등록 -->
  	
  	
  	<!-- 첨부파일업로드  -->
	 <insert id="insertFile" parameterType="hashmap">
		<![CDATA[
			insert into goodsfile
			 (f_g_gno,f_oname,f_name,f_size,crea_date,update_date) 
			 values(#{gno},#{f_oname},#{f_name},#{f_size},sysdate(),sysdate())
		]]>
	</insert> 
	<!-- 첨부파일업로드  -->
	
	
	<!-- 첨부파일 조회 -->
	<select id="selectFileList" parameterType="int" resultType="hashMap">
		select fno, f_oname, round(f_size/1024,1) as f_size
		from goodsfile
		where fno = #{fno}
		and del_chk = 'N'
	</select>
	
	
	<!-- <select id="detailFile" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			select 
			   fno, f_oname, round(f_size/1024,1) as f_size
			from
			   goodsfile
			where 
			   f_g_gno = #{fno}
			   and
			   del_chk = 'N'      
		]]>
	</select> 
	 -->
	
	
  	<!-- 파일업로드  -->
  	

  
  
  
  </mapper>
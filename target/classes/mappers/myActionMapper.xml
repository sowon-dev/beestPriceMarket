<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.bestpricemarket.mappers.myActionMapper">
  <!-- 특정 유저의 주문 목록 -->
	<select id="actionlist" resultType="com.bestpricemarket.domain.MyActionVO">
	select a.ano,a.a_m_id, a.a_g_gno, a.a_g_actionstatus, a.a_g_enddate,f.f_name,g.gname 
	 from myaction a join goods g
	 on a.a_g_gno = g.gno
	 join goodsfile f
	 on a.a_g_gno = f.f_g_gno
	 where a.a_m_id = #{a_m_id}
	 order by a.ano desc
     limit #{displayPost}, #{postNum}
  		
	</select>
  
  <select id="paylist" resultType="com.bestpricemarket.domain.MyActionVO">
	 select a.ano, a.a_m_id, a.a_g_gno, a.a_g_actionstatus, a.a_g_enddate,f.f_name,g.gname,a.paystatus,a.deliverystatus 
	 from myaction a join goods g
	 on a.a_g_gno = g.gno
	 join goodsfile f
	 on a.a_g_gno = f.f_g_gno
	 where a.a_m_id = #{a_m_id} and a.a_g_actionstatus=2;
	 
     
  
	</select>
  
  <select id="getCount" resultType="int">
   select count(ano)
   from myaction 
  </select>
  
  <delete id="delete">
   delete from myaction
   where ano=#{ano}
  
  </delete>
  
  </mapper>